targets=call0,calldn,callf,callfn,calln,calls,includes,tests.log
cppflags_force=-I../include
cflags_force=`pkg-config --cflags libSystem`
cflags=-W -Wall -g -O2 -pedantic -fPIE -D_FORTIFY_SOURCE=2 -fstack-protector-all
ldflags_force=`pkg-config --libs libSystem` $(OBJDIR)../src/libMarshall.a
ldflags=-pie -Wl,-z,relro -Wl,-z,now
dist=Makefile,pkgconfig.sh,tests.sh

[call0]
type=binary
depends=$(OBJDIR)../src/libMarshall.a
sources=call0.c

[calldn]
type=binary
depends=$(OBJDIR)../src/libMarshall.a
sources=calldn.c

[callf]
type=binary
depends=$(OBJDIR)../src/libMarshall.a
sources=callf.c

[callfn]
type=binary
depends=$(OBJDIR)../src/libMarshall.a
sources=callfn.c

[calln]
type=binary
depends=$(OBJDIR)../src/libMarshall.a
sources=calln.c

[calls]
type=binary
depends=$(OBJDIR)../src/libMarshall.a
sources=calls.c

[includes]
type=binary
depends=$(OBJDIR)../src/libMarshall.a
sources=includes.c

[tests.log]
type=script
script=./tests.sh
depends=pkgconfig.sh,tests.sh,$(OBJDIR)../src/libMarshall.a,$(OBJDIR)call0$(EXEEXT),$(OBJDIR)calldn$(EXEEXT),$(OBJDIR)callf$(EXEEXT),$(OBJDIR)callfn$(EXEEXT),$(OBJDIR)calln$(EXEEXT),$(OBJDIR)calls$(EXEEXT),$(OBJDIR)includes$(EXEEXT)
